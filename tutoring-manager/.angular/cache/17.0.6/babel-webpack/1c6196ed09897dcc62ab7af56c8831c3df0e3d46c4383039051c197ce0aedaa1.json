{"ast":null,"code":"import { StudentListSearchQuery } from '../shared/models/student-list-search-query.model';\nimport { UserStatus } from '../shared/enum/user-status.enum';\nimport { UserList } from '../shared/models/user-list.model';\nimport { UserLetterGroup } from '../shared/models/user-letter-group.model';\nimport { Years } from '../shared/enum/years.enum';\nimport { UserBase } from '../shared/models/user-base.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/services/user-service.service\";\nimport * as i2 from \"../shared/messages/messages.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../shared/letter-list/letter-list.component\";\nimport * as i6 from \"../shared/pipes/translate-pipe.pipe\";\nfunction StudentListComponent_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const selectableYear_r8 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.loadingStudentList)(\"ngValue\", selectableYear_r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 3, selectableYear_r8, \"year\"), \"\");\n  }\n}\nfunction StudentListComponent_option_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const selectableStatus_r9 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r5.loadingStudentList)(\"ngValue\", selectableStatus_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 3, selectableStatus_r9, \"userStatus\"), \"\");\n  }\n}\nfunction StudentListComponent_hr_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"hr\");\n  }\n}\nfunction StudentListComponent_div_44_div_1_img_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 36);\n  }\n}\nfunction StudentListComponent_div_44_div_1_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 37);\n  }\n}\nfunction StudentListComponent_div_44_div_1_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵelement(1, \"app-letter-list\", 39);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"content\", ctx_r14.studentList)(\"studentList\", true);\n  }\n}\nconst _c0 = a0 => ({\n  \"letter-selected\": a0\n});\nfunction StudentListComponent_div_44_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 29)(2, \"div\", 30);\n    i0.ɵɵlistener(\"click\", function StudentListComponent_div_44_div_1_Template_div_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const letterGroup_r11 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.clickLetter(letterGroup_r11.letter));\n    });\n    i0.ɵɵelementStart(3, \"span\", 31);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"span\", 32);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, StudentListComponent_div_44_div_1_img_7_Template, 1, 0, \"img\", 33)(8, StudentListComponent_div_44_div_1_img_8_Template, 1, 0, \"img\", 34);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(9, StudentListComponent_div_44_div_1_div_9_Template, 2, 2, \"div\", 35);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const letterGroup_r11 = ctx.$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c0, ctx_r10.openedLetter == letterGroup_r11.letter));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", letterGroup_r11.letter, \" - \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(letterGroup_r11.count);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.openedLetter != letterGroup_r11.letter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.openedLetter == letterGroup_r11.letter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.openedLetter == letterGroup_r11.letter);\n  }\n}\nfunction StudentListComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtemplate(1, StudentListComponent_div_44_div_1_Template, 10, 8, \"div\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.letterList.result);\n  }\n}\nexport let StudentListComponent = /*#__PURE__*/(() => {\n  class StudentListComponent {\n    constructor(userService, messageService) {\n      this.userService = userService;\n      this.messageService = messageService;\n      this.loadingLetterList = false; //individual for each letter\n      this.loadingStudentList = true; //global for all letters\n      this.errorLoading = false;\n      this.possibleYears = [];\n      this.possibleStatus = [];\n      this.gender = ''; //both genders\n      this.status = UserStatus.ANY;\n    }\n    ngOnInit() {\n      this.possibleYears = Object.keys(Years);\n      this.possibleStatus = Object.keys(UserStatus);\n      this.searchStudents();\n    }\n    searchStudents() {\n      this.messageService.clear();\n      let payload = this.preparePayload(this.status, null, this.gender, this.year);\n      this.getStudentList(payload);\n    }\n    getStudentList(payload, forLetter) {\n      console.log(payload);\n      if (forLetter) {\n        this.loadingLetterList = true;\n        this.studentList = null;\n      } else {\n        this.loadingStudentList = true;\n        this.letterList = null;\n        this.studentList = null;\n      }\n      this.errorLoading = false;\n      if (forLetter) {\n        let mockList = [];\n        let mock1 = new UserBase();\n        mock1.id = \"001\";\n        mock1.name = \"Albert\";\n        mock1.yearOfSchool = \"4th\";\n        mock1.gender = 1;\n        mock1.age = 8;\n        let mock2 = new UserBase();\n        mock2.id = \"002\";\n        mock2.name = \"Annie\";\n        mock2.yearOfSchool = \"5th\";\n        mock2.gender = 0;\n        mock2.age = 9;\n        mockList = [mock1, mock2];\n        this.loadingLetterList = false;\n        this.studentList = mockList;\n      } else {\n        let mockList = new UserList();\n        mockList.count = 3;\n        let letterA = new UserLetterGroup();\n        letterA.letter = 'A';\n        letterA.count = 1;\n        let letterB = new UserLetterGroup();\n        letterB.letter = 'B';\n        letterB.count = 2;\n        mockList.result = [letterA, letterB];\n        this.loadingStudentList = false;\n        this.previousSearchQuery = payload;\n        this.letterList = mockList;\n        this.messageService.addSuccess(\"Found \" + this.letterList.count + \" students.\");\n      }\n      // this.userService.getStudentList(payload).subscribe(\n      //   response => {\n      //     this.studentList = response;\n      //     this.loadingStudentList = false;\n      //   },\n      //   error => {\n      //     this.loadingStudentList = false;\n      //     this.errorLoading = true;\n      //     this.messageService.addError(\"There was an error while loading the student list\");\n      //   }\n      // )\n    }\n    clickLetter(letter) {\n      console.log(\"open letter: \", letter);\n      if (letter == this.openedLetter) {\n        this.openedLetter = null;\n      } else {\n        this.openedLetter = letter;\n        let payload = this.preparePayload(this.previousSearchQuery.status, letter, this.previousSearchQuery.gender, this.previousSearchQuery.yearOfSchool);\n        this.getStudentList(payload, true);\n      }\n    }\n    preparePayload(status, letter, gender, yearOfSchool) {\n      let payload = new StudentListSearchQuery();\n      payload.letter = letter;\n      payload.gender = gender;\n      payload.yearOfSchool = yearOfSchool;\n      payload.status = status;\n      return payload;\n    }\n    updateYear(yearKey) {\n      this.year = yearKey;\n    }\n    updateStatus(statusKey) {\n      this.status = statusKey;\n    }\n    updateGender(genderKey) {\n      this.gender = genderKey;\n    }\n    static #_ = this.ɵfac = function StudentListComponent_Factory(t) {\n      return new (t || StudentListComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.MessagesService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: StudentListComponent,\n      selectors: [[\"app-student-list\"]],\n      decls: 45,\n      vars: 7,\n      consts: [[1, \"card\"], [1, \"title\"], [\"id\", \"searchBox\", 1, \"search-input\"], [\"inputForm\", \"\"], [1, \"row\", \"d-flex\", \"justify-content-center\"], [1, \"form-group\", \"col-md-4\"], [\"for\", \"selectYear\", 1, \"text-bold\"], [1, \"input-group\"], [\"name\", \"selectYear\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\"], [\"selectYear\", \"ngModel\"], [\"value\", \"\", \"disabled\", \"\", \"selected\", \"\", \"hidden\", \"\"], [\"value\", \"ALL\"], [3, \"disabled\", \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"selectGender\", 1, \"text-bold\"], [\"name\", \"selectGender\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\"], [\"selectGender\", \"ngModel\"], [\"value\", \"ALL\", 3, \"disabled\"], [\"value\", \"MALE\", 3, \"disabled\"], [\"value\", \"FEMALE\", 3, \"disabled\"], [\"for\", \"selectStatus\", 1, \"text-bold\"], [\"name\", \"selectStatus\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\"], [\"selectStatus\", \"ngModel\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"button\", \"submit\", 3, \"click\"], [4, \"ngIf\"], [\"class\", \"result\", 4, \"ngIf\"], [3, \"disabled\", \"ngValue\"], [1, \"result\"], [4, \"ngFor\", \"ngForOf\"], [1, \"panel\", 3, \"ngClass\"], [1, \"panel-list-title\", \"d-flex\", \"clickable\", 3, \"click\"], [1, \"flex-grow-1\"], [1, \"small\"], [\"class\", \"alert-image-holder\", \"src\", \"assets/icons/caret-square-up-regular.svg\", \"alt\", \"\", 4, \"ngIf\"], [\"class\", \"alert-image-holder\", \"src\", \"assets/icons/caret-square-down-solid.svg\", \"alt\", \"\", 4, \"ngIf\"], [\"class\", \"panel-list\", 4, \"ngIf\"], [\"src\", \"assets/icons/caret-square-up-regular.svg\", \"alt\", \"\", 1, \"alert-image-holder\"], [\"src\", \"assets/icons/caret-square-down-solid.svg\", \"alt\", \"\", 1, \"alert-image-holder\"], [1, \"panel-list\"], [3, \"content\", \"studentList\"]],\n      template: function StudentListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵtext(2, \" Students List \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 2, 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"label\", 6);\n          i0.ɵɵtext(8, \"School Year\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 7)(10, \"select\", 8, 9);\n          i0.ɵɵlistener(\"ngModelChange\", function StudentListComponent_Template_select_ngModelChange_10_listener($event) {\n            return ctx.updateYear($event);\n          });\n          i0.ɵɵelementStart(12, \"option\", 10);\n          i0.ɵɵtext(13, \"Select Year\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"option\", 11);\n          i0.ɵɵtext(15, \"Any\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(16, StudentListComponent_option_16_Template, 3, 6, \"option\", 12);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(17, \"div\", 5)(18, \"label\", 13);\n          i0.ɵɵtext(19, \"Gender\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 7)(21, \"select\", 14, 15);\n          i0.ɵɵlistener(\"ngModelChange\", function StudentListComponent_Template_select_ngModelChange_21_listener($event) {\n            return ctx.updateGender($event);\n          });\n          i0.ɵɵelementStart(23, \"option\", 10);\n          i0.ɵɵtext(24, \"Select Gender\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"option\", 16);\n          i0.ɵɵtext(26, \"Any\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"option\", 17);\n          i0.ɵɵtext(28, \"Male\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"option\", 18);\n          i0.ɵɵtext(30, \"Female\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(31, \"div\", 5)(32, \"label\", 19);\n          i0.ɵɵtext(33, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"div\", 7)(35, \"select\", 20, 21);\n          i0.ɵɵlistener(\"ngModelChange\", function StudentListComponent_Template_select_ngModelChange_35_listener($event) {\n            return ctx.updateStatus($event);\n          });\n          i0.ɵɵelementStart(37, \"option\", 10);\n          i0.ɵɵtext(38, \"Any\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(39, StudentListComponent_option_39_Template, 3, 6, \"option\", 12);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(40, \"div\", 22)(41, \"button\", 23);\n          i0.ɵɵlistener(\"click\", function StudentListComponent_Template_button_click_41_listener() {\n            return ctx.searchStudents();\n          });\n          i0.ɵɵtext(42, \"Search\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(43, StudentListComponent_hr_43_Template, 1, 0, \"hr\", 24)(44, StudentListComponent_div_44_Template, 2, 1, \"div\", 25);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(16);\n          i0.ɵɵproperty(\"ngForOf\", ctx.possibleYears);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"disabled\", ctx.loadingStudentList);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.loadingStudentList);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.loadingStudentList);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngForOf\", ctx.possibleStatus);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.letterList != null && !ctx.loadingLetterList);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.letterList != null && !ctx.loadingLetterList);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i5.LetterListComponent, i6.TranslatePipe]\n    });\n  }\n  return StudentListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}